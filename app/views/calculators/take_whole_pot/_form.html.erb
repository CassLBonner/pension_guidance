<h2 id="calculator">Find out what you’d get after tax</h2>

<% if local_assigns[:calculator].try(:valid?) %>
  <div class="error-summary" role="group" aria-labelledby="error-summary-heading" tabindex="-1">

    <h1 class="heading-medium error-summary-heading" id="error-summary-heading">
      There was a problem with your details
    </h1>

    <ul class="error-summary-list">
      <% local_assigns[:calculator].try(:errors).keys.each do |attribute| %>
        <li><a href="#<%= attribute %>"><%= local_assigns[:calculator].try(:errors)[attribute].first %></a></li>
      <% end %>
    </ul>

  </div>
<% end %>

<form action="/take-whole-pot/results#calculator" method="get">
  <div class="form-group <%= 'error' if local_assigns[:calculator].try(:errors).try(:has_key?, :pot) %>">
    <label class="form-label" for="pot">
      Total pension pot value
    </label>
    <% if local_assigns[:calculator].try(:errors).try(:has_key?, :pot) %>
      <span class="error-message"><%= local_assigns[:calculator].try(:errors)[:pot].first %></span>
    <% end %>
    <span id="pot-a">£</span> <input aria-labelledby="pot-a" class="form-control calculator__field" type="text" id="pot" name="pot" value="<%= local_assigns[:pot] %>">
  </div>

  <div class="form-group <%= 'error' if local_assigns[:calculator].try(:errors).try(:has_key?, :income) %>">
    <label class="form-label" for="income">
      Income for the year
      <span class="form-hint">Includes your salary, savings, benefits and State Pension payments</span>
    </label>
    <% if local_assigns[:calculator].try(:errors).try(:has_key?, :income) %>
      <span class="error-message"><%= local_assigns[:calculator].try(:errors)[:income].first %></span>
    <% end %>
    <span id="income-a">£</span> <input aria-labelledby="income-a" class="form-control calculator__field" type="text" id="income" name="income" value="<%= local_assigns[:income] %>">
  </div>

  <div class="form-group">
    <input type="submit" class="button" value="Calculate" id="js-calculate">
  </div>
</form>
