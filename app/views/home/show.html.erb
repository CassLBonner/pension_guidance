<% content_for(:page_title, t('service.homepage.title')) %>
<% content_for(:meta_description, 'A free and impartial government service that helps you understand ' +
                                    'the options for your pension pot.') %>

<div class="l-page-container">
  <p class="home-intro">Phone <b>0800 138 3944</b> to book a free appointment</p>
</div>

<div class="l-grid-row l-home-row l-home-row--accent">
  <div class="l-page-container">
    <div class="l-column-two-thirds">
      <h2 class="l-home-single-column-heading">Pension Wise helps you understand what to do with your pension money</h2>

      <p>We’re a free, impartial service for those over 50<br>with a <a href="#">defined contribution pension</a>.</p>
    </div>

    <div class="l-column-third l-home-intro-container">
      <%= image_tag("folks.png", class: 'l-home-piggy-bank') %>
    </div>
  </div>
</div>

<div class="l-grid-row l-home-row">
  <div class="l-page-container">
    <div class="l-column-half">
      <h2 class="l-home-single-column-heading">Choose an option that’s right for you</h2>

      <p>
        There are 5 ways you can take your pension money.<br>
        Choose an option to find out more.
      </p>

      <p><a href="/pension-pot-options"><b>Not sure where to begin?</b></a></p>
    </div>

    <div class="l-column-half">
      <%= image_tag("retirement.png", class: 'l-home-retirement') %>
    </div>
  </div>
</div>

<div class="l-grid-row l-home-row l-home-options">
  <div class="l-page-container">
    <div class="l-home-options__option-container">
      <div class="l-home-options__option l-home-options__option--leave-pot-untouched">
        <span class="circle circle--s circle--leave-pot-untouched l-home-options__circle"></span>
        <a class="l-home-options__link" href="/leave-pot-untouched">Leave your pot untouched</a>
      </div>
    </div>

    <div class="l-home-options__option-container">
      <div class="l-home-options__option l-home-options__option--guaranteed-income">
        <span class="circle circle--s circle--guaranteed-income l-home-options__circle"></span>
        <a class="l-home-options__link" href="/guaranteed-income">Guaranteed income (annuity)</a>
      </div>
    </div>

    <div class="l-home-options__option-container">
      <div class="l-home-options__option l-home-options__option--adjustable-income">
        <span class="circle circle--s circle--adjustable-income l-home-options__circle"></span>
        <a class="l-home-options__link" href="/adjustable-income">Adjustable income</a>
      </div>
    </div>

    <div class="l-home-options__option-container">
      <div class="l-home-options__option l-home-options__option--take-cash-in-chunks">
        <span class="circle circle--s circle--take-cash-in-chunks l-home-options__circle"></span>
        <a class="l-home-options__link" href="/take-cash-in-chunks">Take cash in chunks</a>
      </div>
    </div>

    <div class="l-home-options__option-container">
      <div class="l-home-options__option l-home-options__option--take-whole-pot">
        <span class="circle circle--s circle--take-whole-pot l-home-options__circle"></span>
        <a class="l-home-options__link" href="/take-whole-pot">Take whole pot</a>
      </div>
    </div>
  </div>
</div>

<div class="l-grid-row l-home-row--callout">
  <div class="l-page-container">
    <div class="l-home-row">
      <div class="l-column-half">
        <h2 class="l-home-single-column-heading">Talk about your pension options</h2>

        <p>If you'd like to speak to someone about your options, we offer free appointments to help you make an informed decision.</p>
        <p><a href="/appointments" class="button">Book a free appointment</a></p>
      </div>

      <div class="l-column-half">
        <%= image_tag("guidance-session.png") %>
      </div>
    </div>

    <div class="l-home-row">
      <div class="l-column-half">
        <div class="statistic">
          <p class="statistic__number" data-counter="52403">52,403</p>
          <p class="statistic__label">Pension Wise appointments to date</p>
        </div>
      </div>

      <div class="l-column-half">
        <div class="statistic">
          <p class="statistic__number"><span data-counter="90">90</span>%</p>
          <p class="statistic__label">Of customers are very satisfied with Pension Wise guidance</p>
        </div>
      </div>
    </div>
  </div>
</div>



<div class="l-page-container">
  <div class="l-grid-row l-home-row">
    <div class="l-column-third">
      <h2 class="l-home-single-column-heading">Popular pages</h2>
    </div>

    <div class="l-column-third">
      <ul class="quick-links">
        <li><a href="/pension-pot-value">How much is my pension worth?</a></li>
        <li><a href="/tax">Tax and pensions</a></li>
        <li><a href="/state-pension">The State Pension</a></li>
        <li><a href="/scams">Scams</a></li>
        <li><a href="/pension-statements">Help talking to your provider</a></li>
      </ul>
    </div>
  </div>
</div>

<% content_for(:after_script) do %>
<script>
  function isScrolledIntoView($elem) {
    var $window = $(window);

    var docViewTop = $window.scrollTop();
    var docViewBottom = docViewTop + $window.height();

    var elemTop = $elem.offset().top;
    var elemBottom = elemTop + $elem.height();

    return ((elemBottom <= docViewBottom) && (elemTop >= docViewTop));
  }

  function numberWithCommas(x) {
    return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
  }

  $('[data-counter]').each(function() {
    var $el = $(this);
    var target = $el.data('counter');
    var value = 1;

    $el.text(value);

    function bump() {
      if (value >= target) {
        return;
      }

      value += Math.ceil((target - value) / 15);

      if (value >= (target - 2)) {
        value = target;
      }

      $el.text(numberWithCommas(value));

      if (value < target) {
        setTimeout(bump, 10);
      }
    };

    var scroller = function() {
      if (isScrolledIntoView($el)) {
        bump();
        $(window).unbind('scroll', scroller);
      }
    };

    $(window).scroll(scroller);
  });
</script>
<% end %>
